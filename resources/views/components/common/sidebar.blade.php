<nav x-data="sidebar"
     class="sidebar fixed top-0 bottom-0 z-40 flex-none w-[212px] border-r border-black/10 dark:border-white/10 transition-all duration-300">
    <div class="bg-white dark:bg-black h-full">
        <!-- Start Logo -->
        <div class="flex p-4">
            <a href="/" class="main-logo flex-1 w-full">
                <svg width="130" height="40" viewBox="0 0 2500 1000" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M697.941 683.984L694 790H820L806.624 674L697.941 683.984Z" fill="#C278FF"/>
                    <path d="M816.54 619L699.177 604.287L688 218.543L871 217L816.54 619Z" fill="#C278FF"/>
                    <path
                        d="M634 787.735L619.39 545.899L399.757 479.382L383.127 599.231L469.246 612.059C435.274 645.911 404.39 663.135 337.395 666.104C332.525 666.342 327.773 665.866 323.022 665.51C299.859 662.897 278.359 656.72 258.403 646.862C232.033 633.796 211.246 615.147 195.566 590.916C190.815 583.077 186.42 574.881 182.856 566.091C176.68 550.887 172.878 534.733 171.334 517.629C171.334 517.391 171.334 517.273 171.334 517.035C170.859 511.452 170.622 505.751 170.622 499.931C170.622 494.111 170.859 488.409 171.334 482.826C171.334 482.589 171.334 482.47 171.334 482.233C172.878 465.128 176.68 448.974 182.856 433.77C186.42 424.981 190.696 416.666 195.566 408.945C211.246 384.714 232.033 365.947 258.403 353C278.359 343.141 299.978 336.965 323.022 334.351C327.773 333.995 332.525 333.758 337.395 333.758C354.025 333.758 370.298 336.133 386.453 340.409C393.461 342.666 400.351 345.16 407.24 348.249C411.517 350.387 415.793 352.525 419.95 355.019C440.5 367.135 458.318 382.814 473.522 402.175C480.293 410.846 486.113 419.873 491.221 429.138L585.536 337.202C574.133 321.286 561.304 306.319 546.931 292.422C546.931 292.422 546.456 291.947 546.218 291.709C545.268 290.759 544.436 289.928 543.486 288.977C536.122 282.088 505.713 257.738 498.111 252.631C491.815 248.355 485.401 244.316 478.867 240.396C459.506 228.994 439.431 221.748 418.762 216.403C416.03 215.571 413.18 214.74 410.329 214.146C400.47 211.889 390.611 210.226 380.633 208.801V208.207C376.95 207.851 373.506 207.613 369.942 207.257C368.754 207.138 367.448 206.9 366.26 206.782L365.903 207.019C361.508 206.663 357.113 206.188 352.718 205.831C345.116 205.356 337.514 205 330.03 205C276.221 205 226.569 218.066 180.837 244.316C135.105 270.567 98.8757 306.201 72.1492 351.337C45.4227 396.473 32 446.005 32 499.693C32 499.693 32 499.812 32 499.931C32 500.05 32 500.05 32 500.168C32 553.976 45.4227 603.388 72.1492 648.525C98.8757 693.661 135.105 729.414 180.837 755.545C226.569 781.796 276.221 793.317 330.03 794.862C415.793 797.356 479.818 765.642 516.997 740.817L503.575 787.854H633.762L634 787.735Z"
                        fill="#C278FF"/>
                    <path
                        d="M1126.11 404.653H1186.79V497.254H1126.11V568.485C1126.11 596.486 1139.13 612.452 1165.42 612.452C1168.37 612.452 1180.9 611.224 1183.84 610.733V703.333C1172.54 706.281 1148.22 708 1135.2 708C1054.38 708 1026.62 646.839 1026.62 569.713V497.254H991V404.653H1026.62V344.721L1126.36 315V404.653H1126.11Z"
                        fill="currentColor"/>
                    <path
                        d="M1558.97 589.363V608.276C1540.54 664.77 1478.15 708 1397.57 708C1303.24 708 1233.71 647.33 1233.71 552.519C1233.71 457.708 1303.24 397.039 1397.57 397.039C1486.74 397.039 1550.86 450.585 1558.97 528.939V565.783H1335.17C1339.84 598.451 1363.67 618.101 1397.57 618.101C1421.89 618.101 1443.26 609.259 1454.56 589.609H1558.97V589.363ZM1341.07 512.728H1453.83C1443.75 491.85 1425.33 480.06 1397.32 480.06C1371.28 480.06 1351.14 491.85 1340.82 512.728H1341.07Z"
                        fill="currentColor"/>
                    <path
                        d="M1928.44 700.877H1828.7V672.875C1805.61 695.473 1775.15 708 1740.27 708C1663.62 708 1607.86 647.33 1607.86 552.519C1607.86 457.708 1663.62 397.039 1740.27 397.039C1775.4 397.039 1805.61 410.057 1828.7 432.654V404.162H1928.44V700.877ZM1832.14 552.519C1832.14 513.956 1807.82 490.867 1770.48 490.867C1733.14 490.867 1708.82 513.956 1708.82 552.519C1708.82 591.082 1733.14 614.171 1770.48 614.171C1807.82 614.171 1832.14 591.082 1832.14 552.519Z"
                        fill="currentColor"/>
                    <path
                        d="M2010.49 404.162H2110.23V433.145C2129.15 410.548 2154.7 397.039 2184.42 397.039C2225.94 397.039 2253.21 415.46 2269.42 443.953C2290.3 414.969 2321.01 397.039 2357.37 397.039C2439.42 397.039 2468.9 461.147 2468.9 538.273V700.877H2369.65V542.449C2369.65 513.465 2355.4 490.867 2332.31 490.867C2305.53 490.867 2289.56 511.009 2289.56 546.624V700.877H2190.32V542.449C2190.32 513.465 2176.07 490.867 2152.98 490.867C2127.43 490.867 2110.23 509.289 2110.23 541.22V700.877H2010.49V404.162Z"
                        fill="currentColor"/>
                </svg>
            </a>
        </div>
        <!-- End Logo -->
        <!-- Start Menu -->
        <ul class="relative h-[calc(100vh-58px)] flex flex-col gap-1 overflow-y-auto overflow-x-hidden p-4 py-0"
            x-data="{ activeMenu: '' }">
            <h2 class="pl-3 my-2 text-black/60 dark:text-white/40 text-sm">
                <span>User Interface</span>
            </h2>
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'creatives' }"
                   @click="activeMenu === 'creatives' ? activeMenu = null : activeMenu = 'creatives'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'creatives' }">
                        <x-icons.arrow-right/>
                    </div>
                    <div class="flex items-center">
                        <x-icons.screen-play/>
                        <span class="pl-2">Creatives</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'creatives'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/creatives/library">Library</a></li>
                    @permission('creatives.create')
                    <li><a href="/creatives/create">New creative</a></li>
                    @endpermission
                    @permission('creatives.tags')
                    <li><a href="/creatives/tags">Tags</a></li>
                    @endpermission
                    @auth()
                        <li><a href="/creatives/favorites">Favorites</a></li>
                    @endauth
                </ul>
            </li>


            @permission('operators.show')
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'operators' }"
                   @click="activeMenu === 'operators' ? activeMenu = null : activeMenu = 'operators'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'operators' }">
                        <x-icons.arrow-right/>
                    </div>
                    <div class="flex items-center">
                        <x-icons.headphones/>
                        <span class="pl-2">Operators</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'operators'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/operators/statistic">Statistic</a></li>
                    <li><a href="/operators/dashboard">Dashboard</a></li>
                </ul>
            </li>
            @endpermission

            {{--             @role('admin')--}}
            {{--             <li class="menu nav-item">--}}
            {{--                 <a href="javaScript:;" class="nav-link group active text-black dark:text-white" :class="{ 'active': activeMenu === 'finance' }" @click="activeMenu === 'finance' ? activeMenu = null : activeMenu = 'finance'">--}}
            {{--                     <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center" :class="{ '!rotate-90': activeMenu === 'finance' }">--}}
            {{--                         <x-icons.arrow-right />--}}
            {{--                     </div>--}}
            {{--                     <div class="flex items-center">--}}
            {{--                         <x-icons.dollar />--}}
            {{--                         <span class="pl-2">Finance</span>--}}
            {{--                     </div>--}}
            {{--                 </a>--}}
            {{--                 <ul x-cloak x-show="activeMenu === 'finance'" x-collapse class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">--}}
            {{--                     <li><a href="/finance/report">Report</a></li>--}}
            {{--                 </ul>--}}
            {{--             </li>--}}
            {{--             @endrole--}}


            @permission('clients.show')
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'clients' }"
                   @click="activeMenu === 'clients' ? activeMenu = null : activeMenu = 'clients'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'clients' }">
                        <x-icons.arrow-right/>
                    </div>
                    <div class="flex items-center">
                        <x-icons.people/>
                        <span class="pl-2">Clients</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'clients'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/clients">All Clients</a></li>
                </ul>
                <ul x-cloak x-show="activeMenu === 'clients'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/clients/failed-jobs">Failed Jobs</a></li>
                </ul>
            </li>
            @endpermission



            @permission('shorter.show')
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'shorter' }"
                   @click="activeMenu === 'shorter' ? activeMenu = null : activeMenu = 'shorter'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'shorter' }">
                        <x-icons.arrow-right/>
                    </div>
                    <div class="flex items-center">
                        <x-icons.url/>
                        <span class="pl-2">Shorter URL</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'shorter'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/shorter/create">Short URL</a></li>
                </ul>
                <ul x-cloak x-show="activeMenu === 'shorter'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/shorter">Manage URL</a></li>
                </ul>
                @role('admin')
                <ul x-cloak x-show="activeMenu === 'shorter'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li><a href="/shorter/domains">Manage Domain</a></li>
                </ul>
                @endrole
            </li>
            @endpermission

            <!-- Tickets -->
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'Tickets' }"
                   @click="activeMenu === 'Tickets' ? activeMenu = null : activeMenu = 'Tickets'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'Tickets' }">
                        <x-icons.arrow-right/>
                    </div>

                    <div class="flex items-center">
                        <x-icons.tickets/>
                        <span class="pl-2">Tickets</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'Tickets'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li>
                        <a href="/tickets/create">Create Ticket</a>
                    </li>
                    <li>
                        <a href="/tickets">My Tickets</a>
                    </li>
                    @if(auth()->user()->hasPermissionTo('tickets.moderation'))
                        <li>
                            <a href="/tickets/moderation">Moderation</a>
                        </li>
                    @endif
                    @role('admin')
                    <li>
                        <a href="/tickets/all">All Tickets</a>
                    </li>
                    <li>
                        <a href="/tickets/settings">Ticket Settings</a>
                    </li>
                    @endrole
                </ul>
            </li>

            @role('admin')
            <li class="menu nav-item">
                <a href="javaScript:;" class="nav-link group active text-black dark:text-white"
                   :class="{ 'active': activeMenu === 'AdminPanel' }"
                   @click="activeMenu === 'AdminPanel' ? activeMenu = null : activeMenu = 'AdminPanel'">
                    <div class="text-black/50 dark:text-white/20 w-4 h-4 flex items-center justify-center"
                         :class="{ '!rotate-90': activeMenu === 'AdminPanel' }">
                        <x-icons.arrow-right/>
                    </div>

                    <div class="flex items-center">
                        <x-icons.spanner/>
                        <span class="pl-2">Admin Settings</span>
                    </div>
                </a>
                <ul x-cloak x-show="activeMenu === 'AdminPanel'" x-collapse
                    class="sub-menu flex flex-col gap-1 text-black dark:text-white/80">
                    <li>
                        <a href="/admin-panel/users">Users</a>
                    </li>
                    <li>
                        <a href="/admin-panel/operators">Operators</a>
                    </li>
                    <li>
                        <a href="/admin-panel/api-tokens">Api tokens</a>
                    </li>
                </ul>
                @endrole
            </li>
            <!-- End Menu -->
        </ul>
    </div>
</nav>
<script>
    document.addEventListener("alpine:init", () => {
        Alpine.data("sidebar", () => ({
            init() {
                const selector = document.querySelector('.sidebar ul a[href="' + window.location
                    .pathname + '"]');
                if (selector) {
                    selector.classList.add('active');
                    const ul = selector.closest('ul.sub-menu');
                    if (ul) {
                        let ele = ul.closest('li.menu').querySelectorAll('.nav-link');
                        if (ele) {
                            ele = ele[0];
                            setTimeout(() => {
                                ele.click();
                            });
                        }
                    }
                }
            },
        }));
    });
</script>
